"use strict";(self.webpackChunkvisual_workflow_editor_frontend=self.webpackChunkvisual_workflow_editor_frontend||[]).push([[523],{9523:(e,r,o)=>{o.r(r),o.d(r,{default:()=>h});var t=o(9950),s=o(6491),n=o(2053),l=o(6639),a=o(3174),d=o(249),i=o(2610),c=o(3563),p=o(7818),g=o(5811),x=o(4414);const u=e=>{let{onNodeSelect:r=()=>{}}=e;const{t:o}=(0,p.Bd)(),[u,b]=(0,t.useState)([]),[h,y]=(0,t.useState)(!0),[f,m]=(0,t.useState)(null);(0,t.useEffect)((()=>{(async()=>{try{y(!0);const e=await(0,g.C)(),r=Object.values(e);console.log("\u3010\u8c03\u8bd5\u3011\u4eceAPI\u83b7\u53d6\u7684\u8282\u70b9\u6a21\u677f:",e),console.log("\u3010\u8c03\u8bd5\u3011\u8f6c\u6362\u4e3a\u6570\u7ec4\u540e\u7684\u8282\u70b9\u6a21\u677f:",r),b(r),m(null)}catch(e){console.error("\u3010\u8c03\u8bd5\u3011\u83b7\u53d6\u8282\u70b9\u6a21\u677f\u5931\u8d25:",e),m(o("nodeSelector.loadError"))}finally{y(!1)}})()}),[o]);const j=e=>{console.log(o("nodeDrag.end")),e.currentTarget.classList&&e.currentTarget.classList.remove("dragging")};return h?(0,x.jsx)(s.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"200px"},children:(0,x.jsx)(l.A,{})}):f?(0,x.jsxs)(s.A,{sx:{width:"100%"},children:[(0,x.jsx)(a.A,{severity:"warning",sx:{mb:2},children:f}),(0,x.jsx)(n.A,{color:"text.secondary",sx:{padding:2},children:o("nodeSelector.errorOccurred")})]}):0===u.length?(0,x.jsx)(s.A,{sx:{padding:2},children:(0,x.jsx)(n.A,{color:"text.secondary",children:o("nodeSelector.noTemplates")})}):(0,x.jsx)(s.A,{sx:{width:"100%",bgcolor:"transparent"},children:(0,x.jsx)("nav",{"aria-label":"node types",children:(0,x.jsx)(d.A,{children:u.map((e=>{const t=(e=>{console.log("\u3010\u8c03\u8bd5\u3011\u5f00\u59cb\u8f6c\u6362\u6a21\u677f:",e);const r={id:e.id,label:e.label,description:e.description,type:e.type,fields:e.fields,inputs:e.inputs,outputs:e.outputs};return console.log("\u3010\u8c03\u8bd5\u3011\u8f6c\u6362\u540e\u7684\u8282\u70b9\u7c7b\u578b:",r),r})(e);return(0,x.jsx)(i.Ay,{disablePadding:!0,draggable:!0,onDragStart:e=>((e,r)=>{console.log(o("nodeDrag.start"),r.id),e.dataTransfer.setData("application/reactflow-node",JSON.stringify(r)),e.dataTransfer.effectAllowed="move",e.currentTarget.classList&&e.currentTarget.classList.add("dragging");const t=document.createElement("div");t.textContent=r.label,t.style.backgroundColor="#1976d2",t.style.color="white",t.style.padding="10px",t.style.borderRadius="4px",t.style.position="absolute",t.style.top="-1000px",document.body.appendChild(t);try{e.dataTransfer.setDragImage(t,0,0)}catch(f){console.error("\u8bbe\u7f6e\u62d6\u62fd\u56fe\u50cf\u5931\u8d25:",f)}setTimeout((()=>{document.body.removeChild(t)}),0)})(e,t),onDragEnd:j,onClick:()=>r(t),sx:{cursor:"grab",padding:"8px 16px",margin:"4px 0",border:"1px dashed rgba(255, 255, 255, 0.3)",borderRadius:"4px",color:"white","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.6)"},"&.dragging":{opacity:.5,backgroundColor:"rgba(255, 255, 255, 0.15)"}},children:(0,x.jsx)(c.A,{primary:t.label,secondary:t.description||o("nodeTypes.dragHint"),primaryTypographyProps:{fontWeight:"bold",color:"white"},secondaryTypographyProps:{color:"rgba(255, 255, 255, 0.7)",fontSize:"0.75rem"}})},t.id)}))})})})},b=(0,t.memo)(u),h=e=>{let{open:r}=e;const{t:o}=(0,p.Bd)();return r?(0,x.jsxs)(s.A,{sx:{position:"absolute",top:"12px",left:"12px",width:"220px",height:"auto",maxHeight:"60%",bgcolor:"#2d2d2d",borderRadius:"4px",boxShadow:"0 4px 20px rgba(0,0,0,0.5)",zIndex:5,display:"flex",flexDirection:"column",border:"1px solid #444",overflow:"hidden"},children:[(0,x.jsx)(s.A,{sx:{p:1,bgcolor:"#333",display:"flex",justifyContent:"center",alignItems:"center",borderBottom:"1px solid #444"},children:(0,x.jsxs)(n.A,{variant:"subtitle2",color:"white",children:[" ",o("sidebar.title")]})}),(0,x.jsxs)(s.A,{sx:{p:1.5,overflowY:"auto",flexGrow:1},children:[(0,x.jsx)(n.A,{variant:"body2",sx:{mb:1.5,color:"#aaa",fontStyle:"italic",fontSize:"0.8rem"},children:o("sidebar.dragHint")}),(0,x.jsx)(b,{})]})]}):null}}}]);